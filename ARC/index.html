<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblia de Redes | Simulador Infinito (T4-T8)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: #e2e8f0; }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #3b82f6; border-radius: 5px; }
        ::-webkit-scrollbar-thumb:hover { background: #2563eb; }

        /* Estilos de Tablas */
        .table-wrapper { overflow-x: auto; margin: 2rem 0; border-radius: 0.75rem; border: 1px solid #334155; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        table { width: 100%; border-collapse: collapse; text-align: center; }
        th { background: #1e293b; color: #60a5fa; padding: 1rem; font-weight: 800; text-transform: uppercase; letter-spacing: 0.05em; border-bottom: 2px solid #3b82f6; }
        td { padding: 1rem; border-bottom: 1px solid #334155; color: #cbd5e1; vertical-align: middle; }
        tr:last-child td { border-bottom: none; }
        tr:nth-child(even) { background-color: rgba(30, 41, 59, 0.5); }
        tr:hover { background-color: rgba(59, 130, 246, 0.1); }

        /* Layout */
        .sidebar { position: fixed; top: 0; left: 0; height: 100vh; width: 280px; background: #0f172a; border-right: 1px solid #1e293b; overflow-y: auto; z-index: 50; }
        .main-content { margin-left: 280px; padding: 3rem; max-w: 1400px; }
        @media (max-width: 768px) { .sidebar { display: none; } .main-content { margin-left: 0; padding: 1.5rem; } }

        /* Tarjetas de Teor√≠a */
        .theory-card { background: #1e293b; border: 1px solid #334155; border-radius: 1rem; margin-bottom: 3rem; position: relative; overflow: hidden; }
        .theory-card::before { content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: #3b82f6; }
        .theory-header { background: linear-gradient(90deg, #1e3a8a 0%, #1e293b 100%); padding: 1.5rem; border-bottom: 1px solid #334155; display: flex; align-items: center; gap: 1rem; }
        .theory-body { padding: 2rem; }

        /* Cajas de √ânfasis */
        .detail-box { background: rgba(16, 185, 129, 0.1); border: 1px solid #059669; border-left: 4px solid #10b981; padding: 1.5rem; margin: 1.5rem 0; border-radius: 0.5rem; }
        .alert-box { background: rgba(220, 38, 38, 0.1); border: 1px solid #991b1b; border-left: 4px solid #ef4444; padding: 1.5rem; margin: 1.5rem 0; border-radius: 0.5rem; }
        .cmd-box { background: #020617; font-family: 'Courier New', monospace; padding: 1.25rem; border-radius: 0.5rem; border: 1px solid #334155; color: #67e8f9; margin: 1rem 0; white-space: pre-wrap; box-shadow: inset 0 2px 4px rgba(0,0,0,0.5); }

        /* Simulador */
        .quiz-wrapper { background: white; border-radius: 1.5rem; padding: 2rem; color: #1e293b; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        .option-btn { width: 100%; text-align: left; padding: 1.25rem 1.5rem; margin-bottom: 0.75rem; border: 2px solid #e2e8f0; border-radius: 1rem; background: #f8fafc; color: #334155; transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); font-weight: 600; font-size: 1.05rem; position: relative; overflow: hidden; }
        .option-btn:hover:not(:disabled) { border-color: #3b82f6; background: #eff6ff; transform: translateY(-2px); box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.1); }
        .option-btn:disabled { cursor: default; opacity: 0.7; }
        .option-btn.correct { border-color: #22c55e; background: #dcfce7; color: #14532d; }
        .option-btn.incorrect { border-color: #ef4444; background: #fee2e2; color: #7f1d1d; }
        
        .feedback-panel { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <!-- Men√∫ Lateral -->
    <aside class="sidebar hidden md:block">
        <div class="p-6">
            <h1 class="text-3xl font-black text-white mb-1 tracking-tighter">NET<span class="text-blue-500">MASTER</span></h1>
            <p class="text-xs text-blue-400 font-bold tracking-widest uppercase mb-10">Edici√≥n "Infinito"</p>
            
            <nav class="space-y-2">
                <a href="#t4" class="flex items-center gap-3 px-4 py-3 text-sm font-bold text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition"><i class="fa-solid fa-sitemap w-5 text-center"></i> T4: Jer√°rquicas</a>
                <a href="#t5" class="flex items-center gap-3 px-4 py-3 text-sm font-bold text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition"><i class="fa-solid fa-network-wired w-5 text-center"></i> T5: STP Experto</a>
                <a href="#t6" class="flex items-center gap-3 px-4 py-3 text-sm font-bold text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition"><i class="fa-solid fa-tags w-5 text-center"></i> T6: VLANs & 802.1Q</a>
                <a href="#t7" class="flex items-center gap-3 px-4 py-3 text-sm font-bold text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition"><i class="fa-solid fa-server w-5 text-center"></i> T7: VTP Total</a>
                <a href="#t8" class="flex items-center gap-3 px-4 py-3 text-sm font-bold text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition"><i class="fa-solid fa-route w-5 text-center"></i> T8: Inter-VLAN</a>
            </nav>

            <div class="mt-12 pt-8 border-t border-slate-700">
                <a href="#simulator" class="flex items-center justify-center gap-2 w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold py-3 px-4 rounded-xl shadow-lg hover:shadow-blue-500/30 hover:scale-[1.02] transition-all">
                    <i class="fa-solid fa-play"></i> Iniciar Test
                </a>
            </div>
        </div>
    </aside>

    <!-- Contenido Principal -->
    <main class="main-content">
        
        <div class="mb-12 border-b border-slate-700 pb-8">
            <h2 class="text-4xl font-extrabold text-white mb-4">Gu√≠a de Estudio <span class="text-blue-500">Maestra</span></h2>
            <p class="text-lg text-slate-400 max-w-3xl">Contiene el 100% de la teor√≠a de los PDFs. Si estudias esto y dominas el simulador, el 10 est√° garantizado.</p>
        </div>

        <!-- TEMA 4: REDES JER√ÅRQUICAS -->
        <section id="t4" class="theory-card">
            <div class="theory-header">
                <div class="bg-blue-600/20 p-2 rounded-lg"><i class="fa-solid fa-sitemap text-blue-400 text-xl"></i></div>
                <h2 class="text-2xl font-bold text-white">TEMA 4: Redes Jer√°rquicas</h2>
            </div>
            <div class="theory-body">
                <h3 class="text-xl font-bold text-white mb-4">1. El Modelo de 3 Capas (Cisco)</h3>
                <p class="mb-4 text-slate-300">Dise√±o modular para evitar redes planas. Cada capa tiene una funci√≥n exclusiva.</p>
                
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th width="20%">Capa</th>
                                <th width="30%">Funci√≥n Principal</th>
                                <th width="50%">Caracter√≠sticas T√©cnicas (Clave Examen)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="font-bold text-green-400">ACCESO<br>(Access Layer)</td>
                                <td>Conexi√≥n de usuarios (Edge)</td>
                                <td class="text-left text-sm">
                                    ‚Ä¢ Seguridad de puerto (Port Security).<br>
                                    ‚Ä¢ VLANs y Marcado QoS (Clasificaci√≥n).<br>
                                    ‚Ä¢ <strong>PoE</strong> (Power over Ethernet) para tel√©fonos/APs.<br>
                                    ‚Ä¢ ARP Inspection.<br>
                                    ‚Ä¢ Switches de bajo coste/alta densidad.<br>
                                    ‚Ä¢ <strong>NO</strong> suele tener redundancia al host.
                                </td>
                            </tr>
                            <tr>
                                <td class="font-bold text-blue-400">DISTRIBUCI√ìN<br>(Distribution Layer)</td>
                                <td>Agregaci√≥n y Pol√≠ticas</td>
                                <td class="text-left text-sm">
                                    ‚Ä¢ <strong>Punto de demarcaci√≥n L2/L3.</strong><br>
                                    ‚Ä¢ Enrutamiento Inter-VLAN.<br>
                                    ‚Ä¢ Aplicaci√≥n de pol√≠ticas de seguridad (ACLs).<br>
                                    ‚Ä¢ Redundancia hacia el N√∫cleo y Acceso.<br>
                                    ‚Ä¢ Sumarizaci√≥n de rutas.
                                </td>
                            </tr>
                            <tr>
                                <td class="font-bold text-red-400">N√öCLEO<br>(Core Layer)</td>
                                <td>Backbone de Alta Velocidad</td>
                                <td class="text-left text-sm">
                                    ‚Ä¢ <strong>Conmutaci√≥n pura</strong> (Switching).<br>
                                    ‚Ä¢ Fiabilidad extrema y redundancia.<br>
                                    ‚Ä¢ <strong>PROHIBIDO:</strong> ACLs, inspecci√≥n de paquetes.<br>
                                    ‚Ä¢ Hardware: Fibra √≥ptica (10G/40G/100G).
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="detail-box">
                    <strong>‚ö†Ô∏è Excepci√≥n: N√∫cleo Colapsado</strong>
                    <p class="mt-1 text-sm text-slate-300">En redes peque√±as, se fusionan las capas de <strong>Distribuci√≥n y N√∫cleo</strong>. Reduce costes pero limita la escalabilidad.</p>
                </div>

                <h3 class="text-xl font-bold text-white mb-4 mt-8">2. Principios de Dise√±o</h3>
                <ul class="list-disc pl-5 space-y-2 mb-6 text-slate-300">
                    <li><strong>Di√°metro de la Red:</strong> N√∫mero de saltos entre origen y destino. Objetivo: Bajo y predecible.</li>
                    <li><strong>Agregado de Ancho de Banda:</strong> Uso de <strong>EtherChannel</strong> para combinar enlaces f√≠sicos en uno l√≥gico. Vital en uplinks.</li>
                    <li><strong>Redundancia:</strong> Duplicar enlaces y equipos. Obligatorio en Distribuci√≥n y N√∫cleo.</li>
                </ul>

                <h3 class="text-xl font-bold text-white mb-4">3. Factores de Forma</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-slate-800 p-4 rounded border border-slate-700">
                        <strong class="text-blue-400 block mb-1">Fija</strong>
                        <span class="text-sm text-slate-400">Puertos inamovibles (24/48). Acceso.</span>
                    </div>
                    <div class="bg-slate-800 p-4 rounded border border-slate-700">
                        <strong class="text-blue-400 block mb-1">Modular</strong>
                        <span class="text-sm text-slate-400">Chasis + Tarjetas. Escalable. N√∫cleo.</span>
                    </div>
                    <div class="bg-slate-800 p-4 rounded border border-slate-700">
                        <strong class="text-blue-400 block mb-1">Apilable</strong>
                        <span class="text-sm text-slate-400">StackWise. Plano de control √∫nico.</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- TEMA 5: STP -->
        <section id="t5" class="theory-card">
            <div class="theory-header">
                <div class="bg-blue-600/20 p-2 rounded-lg"><i class="fa-solid fa-network-wired text-blue-400 text-xl"></i></div>
                <h2 class="text-2xl font-bold text-white">TEMA 5: STP (Spanning Tree)</h2>
            </div>
            <div class="theory-body">
                <div class="alert-box">
                    <strong class="text-red-400 text-lg"><i class="fa-solid fa-triangle-exclamation"></i> Riesgos sin STP</strong>
                    <ul class="list-disc pl-5 mt-2 text-slate-300 text-sm">
                        <li><strong>Tormentas de Broadcast:</strong> Tramas girando infinitamente (Ethernet no tiene TTL).</li>
                        <li><strong>Inestabilidad de tabla MAC:</strong> La misma MAC se aprende por puertos distintos.</li>
                        <li><strong>Tramas Duplicadas:</strong> Recepci√≥n m√∫ltiple de un mismo paquete.</li>
                    </ul>
                </div>

                <h3 class="text-xl font-bold text-white mb-4 mt-8">1. Algoritmo STP (Paso a Paso)</h3>
                <div class="space-y-4">
                    <div class="bg-slate-800 p-4 rounded border-l-4 border-blue-500">
                        <h4 class="font-bold text-white">PASO 1: Elecci√≥n del Puente Ra√≠z (Root Bridge)</h4>
                        <p class="text-sm text-slate-400 mt-1">Solo hay UNO por VLAN. Gana el <strong>BID m√°s bajo</strong>.</p>
                        <code class="block mt-2 text-center">BID = Prioridad (2B) + MAC (6B)</code>
                        <p class="text-xs text-slate-500 mt-2 text-center">Prioridad Default: 32768. Desempate: MAC m√°s baja.</p>
                    </div>
                    
                    <div class="bg-slate-800 p-4 rounded border-l-4 border-blue-500">
                        <h4 class="font-bold text-white">PASO 2: Elecci√≥n de Puertos Ra√≠z (RP)</h4>
                        <p class="text-sm text-slate-400 mt-1">Cada switch No-Ra√≠z elige <strong>1 puerto</strong> (mejor camino al Ra√≠z).</p>
                        <p class="text-xs font-bold text-blue-400 mt-2">Desempate: Costo > BID Vecino > Prioridad Puerto Vecino > ID Puerto.</p>
                    </div>

                    <div class="bg-slate-800 p-4 rounded border-l-4 border-blue-500">
                        <h4 class="font-bold text-white">PASO 3: Puertos Designados (DP) y Bloqueo</h4>
                        <p class="text-sm text-slate-400 mt-1">1 DP por segmento (mejor costo). El resto se bloquea.</p>
                        <p class="text-xs font-bold text-green-400 mt-2">TRUCO: Todos los puertos del Root Bridge son DP (Forwarding).</p>
                    </div>
                </div>

                <h3 class="text-xl font-bold text-white mb-4 mt-8">2. Costos y Temporizadores (MEMORIZAR)</h3>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="table-wrapper">
                        <table>
                            <thead><tr><th>Velocidad</th><th>Costo IEEE (Nuevo)</th></tr></thead>
                            <tbody>
                                <tr><td>10 Gbps</td><td class="font-bold text-green-400">2</td></tr>
                                <tr><td>1 Gbps</td><td class="font-bold text-green-400">4</td></tr>
                                <tr><td>100 Mbps</td><td class="font-bold text-green-400">19</td></tr>
                                <tr><td>10 Mbps</td><td class="font-bold text-green-400">100</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
                        <h4 class="text-lg font-bold text-white mb-3">Temporizadores 802.1D</h4>
                        <ul class="space-y-2 text-sm text-slate-300">
                            <li class="flex justify-between border-b border-slate-700 pb-1"><span>Hello Time</span> <span class="text-blue-400 font-mono">2 seg</span></li>
                            <li class="flex justify-between border-b border-slate-700 pb-1"><span>Max Age</span> <span class="text-blue-400 font-mono">20 seg</span></li>
                            <li class="flex justify-between border-b border-slate-700 pb-1"><span>Forward Delay</span> <span class="text-blue-400 font-mono">15 seg</span></li>
                            <li class="flex justify-between pt-2 text-yellow-400 font-bold"><span>Convergencia Total</span> <span>50 seg</span></li>
                        </ul>
                    </div>
                </div>

                <h3 class="text-xl font-bold text-white mb-2 mt-8">3. Estados (802.1D) y Variantes</h3>
                <ul class="list-disc pl-5 text-sm text-slate-300 mb-6">
                    <li><strong>Blocking (20s):</strong> Solo BPDU.</li>
                    <li><strong>Listening (15s):</strong> Prepara elecci√≥n.</li>
                    <li><strong>Learning (15s):</strong> Aprende MACs.</li>
                    <li><strong>Forwarding:</strong> Datos y MACs.</li>
                </ul>

                <div class="detail-box">
                    <strong>Tecnolog√≠as Avanzadas:</strong>
                    <ul class="list-disc pl-5 mt-2 text-sm text-slate-300">
                        <li><strong>PortFast:</strong> Salta a Forwarding ya. Solo puertos de acceso (PC). Evita error DHCP.</li>
                        <li><strong>PVST+:</strong> Instancia STP por VLAN (Balanceo de carga).</li>
                        <li><strong>RSTP (802.1w):</strong> R√°pido. Estados: Discarding, Learning, Forwarding.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- TEMA 6 -->
        <section id="t6" class="theory-card">
            <div class="theory-header">
                <div class="bg-blue-600/20 p-2 rounded-lg"><i class="fa-solid fa-tags text-blue-400 text-xl"></i></div>
                <h2 class="text-2xl font-bold text-white">TEMA 6: VLANs y 802.1Q</h2>
            </div>
            <div class="theory-body">
                <h3 class="text-xl font-bold text-white mb-4">1. Clasificaci√≥n de VLANs</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <div class="bg-slate-800 p-3 rounded border border-slate-700">
                        <strong class="text-blue-400">VLAN de Datos</strong><br>
                        <span class="text-xs text-slate-400">Usuarios normales.</span>
                    </div>
                    <div class="bg-slate-800 p-3 rounded border border-slate-700">
                        <strong class="text-red-400">VLAN 1 (Default)</strong><br>
                        <span class="text-xs text-slate-400">Todos los puertos nacen aqu√≠. Tr√°fico control. Insegura.</span>
                    </div>
                    <div class="bg-slate-800 p-3 rounded border border-slate-700">
                        <strong class="text-yellow-400">VLAN Nativa</strong><br>
                        <span class="text-xs text-slate-400">Tr√°fico SIN ETIQUETA (Untagged) en Trunks. Default=1.</span>
                    </div>
                    <div class="bg-slate-800 p-3 rounded border border-slate-700">
                        <strong class="text-purple-400">VLAN de Voz</strong><br>
                        <span class="text-xs text-slate-400">Prioridad (QoS), < 150ms delay.</span>
                    </div>
                </div>

                <h3 class="text-xl font-bold text-white mb-4">2. La Trama 802.1Q</h3>
                <p class="mb-2 text-slate-300">Inserta un <strong>Tag de 4 Bytes</strong> (32 bits).</p>
                <div class="cmd-box text-center text-sm">
[ Dest | Orig | TAG (4B) | Tipo | Datos | FCS ]
                </div>
                <div class="bg-slate-900 p-4 rounded border border-slate-700 text-sm">
                    <strong class="text-white block mb-2">Estructura del TAG:</strong>
                    <ul class="space-y-1 text-slate-300">
                        <li><span class="text-blue-400 font-mono">TPID (16 bits):</span> Valor <strong>0x8100</strong>.</li>
                        <li><span class="text-blue-400 font-mono">TCI (16 bits):</span>
                            <ul class="pl-4 list-disc">
                                <li><strong>Prioridad (3 bits):</strong> QoS 802.1p.</li>
                                <li><strong>CFI (1 bit):</strong> Token Ring.</li>
                                <li><strong>VID (12 bits):</strong> ID de VLAN (hasta 4096).</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <h3 class="text-xl font-bold text-white mb-2 mt-6">3. Rangos de ID</h3>
                <ul class="list-disc pl-5 text-sm text-slate-300">
                    <li><strong>Normal (1-1005):</strong> En <code>vlan.dat</code>. VTP OK. (1002-1005 reservados).</li>
                    <li><strong>Extendido (1006-4094):</strong> En <code>running-config</code>. VTP Transparente requerido.</li>
                </ul>
            </div>
        </section>

        <!-- TEMA 7 -->
        <section id="t7" class="theory-card">
            <div class="theory-header">
                <div class="bg-blue-600/20 p-2 rounded-lg"><i class="fa-solid fa-server text-blue-400 text-xl"></i></div>
                <h2 class="text-2xl font-bold text-white">TEMA 7: VTP (VLAN Trunking Protocol)</h2>
            </div>
            <div class="theory-body">
                <p class="mb-4 text-slate-300">Protocolo Cisco para sincronizar VLANs. Usa tramas L2 multicast.</p>

                <div class="table-wrapper">
                    <table>
                        <thead><tr><th>Modo</th><th>Crea VLANs?</th><th>Sincroniza?</th><th>Reenv√≠a?</th><th>Guarda en</th></tr></thead>
                        <tbody>
                            <tr><td class="text-green-400 font-bold">Servidor</td><td>S√ç</td><td>S√ç</td><td>S√ç</td><td>NVRAM (vlan.dat)</td></tr>
                            <tr><td class="text-blue-400 font-bold">Cliente</td><td>NO</td><td>S√ç</td><td>S√ç</td><td>RAM (Vol√°til)</td></tr>
                            <tr><td class="text-gray-400 font-bold">Transparente</td><td>S√ç (Local)</td><td>NO</td><td>S√ç</td><td>NVRAM</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="alert-box mt-6">
                    <strong class="text-red-400 text-xl"><i class="fa-solid fa-bomb"></i> N√∫mero de Revisi√≥n (Revision Number)</strong>
                    <p class="mt-2 text-slate-300 text-sm">Contador que sube +1 por cambio. Los switches <strong>obedecen a la revisi√≥n m√°s alta</strong>.</p>
                    <p class="mt-2 font-bold text-white text-sm">Riesgo: Switch viejo con revisi√≥n alta borra VLANs de la red.</p>
                    <p class="text-sm text-slate-300"><strong>Reset:</strong> Cambiar Dominio o pasar a Transparente.</p>
                </div>

                <h3 class="text-xl font-bold text-white mb-2 mt-6">Mensajes VTP</h3>
                <ul class="list-disc pl-5 text-sm text-slate-300">
                    <li><strong>Summary:</strong> Cada 5 min. Lleva Revisi√≥n.</li>
                    <li><strong>Subset:</strong> Lleva detalles de VLANs.</li>
                    <li><strong>Request:</strong> Cliente pide datos.</li>
                    <li><strong>Pruning:</strong> Poda tr√°fico innecesario.</li>
                </ul>
            </div>
        </section>

        <!-- TEMA 8 -->
        <section id="t8" class="theory-card">
            <div class="theory-header">
                <div class="bg-blue-600/20 p-2 rounded-lg"><i class="fa-solid fa-route text-blue-400 text-xl"></i></div>
                <h2 class="text-2xl font-bold text-white">TEMA 8: Enrutamiento Inter-VLAN</h2>
            </div>
            <div class="theory-body">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-slate-900 p-6 rounded-xl border border-slate-700">
                        <h4 class="text-xl font-bold text-purple-400 mb-3 border-b border-slate-600 pb-2">ROAS (Router-on-a-Stick)</h4>
                        <ul class="list-disc pl-5 space-y-2 text-sm text-slate-300 mb-4">
                            <li>Router externo + 1 Trunk.</li>
                            <li>Usa <strong>Subinterfaces</strong> (<code>Fa0/0.10</code>).</li>
                            <li>Obligatorio: <code>encapsulation dot1q 10</code>.</li>
                            <li>Interfaz f√≠sica SIN IP.</li>
                            <li><strong>Desventaja:</strong> Cuello de botella.</li>
                        </ul>
                    </div>

                    <div class="bg-slate-900 p-6 rounded-xl border border-slate-700">
                        <h4 class="text-xl font-bold text-blue-400 mb-3 border-b border-slate-600 pb-2">Switch Multicapa (SVI)</h4>
                        <ul class="list-disc pl-5 space-y-2 text-sm text-slate-300 mb-4">
                            <li>Hardware ASIC (R√°pido).</li>
                            <li>Usa <strong>SVI</strong> (<code>interface vlan 10</code>).</li>
                            <li>Obligatorio: <code>ip routing</code>.</li>
                            <li>Puerto Enrutado: <code>no switchport</code>.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- SIMULADOR INFINITO -->
        <section id="simulator" class="mt-24 mb-20">
            <div class="bg-gradient-to-br from-indigo-900 to-slate-900 rounded-3xl p-12 shadow-2xl text-center border-2 border-indigo-500/30">
                <h2 class="text-5xl font-black text-white mb-6 tracking-tight">SIMULADOR INFINITO</h2>
                <p class="text-blue-200 mb-10 text-xl">Banco de preguntas masivo. Barajado inteligente. Nunca el mismo test.</p>
                
                <div id="quiz-container" class="bg-white text-slate-900 rounded-2xl p-10 max-w-4xl mx-auto text-left shadow-2xl min-h-[500px] relative">
                    
                    <!-- Pantalla Inicio -->
                    <div id="quiz-start" class="text-center py-16">
                        <div class="text-7xl text-blue-600 mb-8 animate-bounce"><i class="fa-solid fa-bolt"></i></div>
                        <button onclick="startQuiz()" class="bg-blue-600 hover:bg-blue-700 text-white text-2xl font-bold py-5 px-16 rounded-full transition shadow-xl hover:shadow-blue-600/40 transform hover:scale-105">
                            GENERAR TEST ALEATORIO
                        </button>
                        <p class="text-base text-slate-500 mt-8 font-medium">Se generar√°n 10 preguntas √∫nicas de un banco de 60+.</p>
                    </div>

                    <!-- Pantalla Pregunta -->
                    <div id="quiz-question" class="hidden">
                        <div class="flex justify-between items-center mb-8 pb-6 border-b border-slate-100">
                            <span class="text-xs font-bold text-white bg-slate-800 px-4 py-1.5 rounded-full tracking-widest uppercase" id="q-topic">TEMA X</span>
                            <span class="text-blue-600 font-black text-xl" id="q-counter">1/10</span>
                        </div>
                        
                        <h3 class="text-2xl font-bold text-slate-800 mb-10 leading-snug" id="q-text">...</h3>
                        
                        <div id="q-options" class="space-y-4"></div>

                        <div id="feedback" class="hidden mt-8 p-6 rounded-xl border border-slate-200 bg-slate-50 feedback-panel">
                            <div class="flex gap-5">
                                <div id="fb-icon" class="text-4xl pt-1"></div>
                                <div>
                                    <h4 id="fb-title" class="font-black text-xl mb-2"></h4>
                                    <p id="fb-text" class="text-base text-slate-700 leading-relaxed"></p>
                                </div>
                            </div>
                        </div>

                        <button id="btn-next" onclick="nextQuestion()" class="hidden w-full mt-10 bg-slate-900 hover:bg-black text-white text-lg font-bold py-4 rounded-xl transition shadow-lg flex justify-center items-center gap-3">Siguiente Pregunta <i class="fa-solid fa-arrow-right"></i></button>
                    </div>

                    <!-- Pantalla Resultados -->
                    <div id="result-screen" class="hidden text-center py-12">
                        <h3 class="text-4xl font-black text-slate-800 mb-8">Resultados Finales</h3>
                        <div class="inline-flex items-center justify-center w-48 h-48 rounded-full border-[10px] border-blue-600 mb-8 bg-blue-50 shadow-inner">
                            <span id="score-display" class="text-7xl font-black text-blue-600"></span>
                        </div>
                        <p id="score-msg" class="text-2xl text-slate-700 mb-12 font-bold px-8"></p>
                        <button onclick="startQuiz()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-10 rounded-xl shadow-lg transition text-lg">Generar Nuevo Test</button>
                    </div>

                </div>
            </div>
        </section>

    </main>

    <script>
        /* --- BANCO DE DATOS MASIVO (60+ PREGUNTAS √öNICAS) --- */
        const masterQuestionBank = [
            // --- TEMA 4: JER√ÅRQUICAS ---
            { t: "T4", q: "¬øCu√°l es la funci√≥n PRINCIPAL de la Capa de N√∫cleo (Core)?", o: ["Conmutaci√≥n de alta velocidad", "Filtrado de paquetes", "Conexi√≥n de usuarios", "Routing Inter-VLAN"], c: 0, e: "El N√∫cleo es el backbone. Solo debe mover datos r√°pido." },
            { t: "T4", q: "En el modelo jer√°rquico, ¬ød√≥nde se deben aplicar las ACLs y pol√≠ticas?", o: ["Distribuci√≥n", "Acceso", "N√∫cleo", "Internet"], c: 0, e: "La capa de Distribuci√≥n es el punto de control inteligente." },
            { t: "T4", q: "¬øQu√© t√©rmino describe el n√∫mero de saltos entre dos puntos de la red?", o: ["Di√°metro de la red", "Ancho de banda", "Latencia", "Convergenia"], c: 0, e: "El di√°metro mide los saltos. Debe ser bajo." },
            { t: "T4", q: "¬øQu√© tecnolog√≠a combina varios enlaces f√≠sicos en uno l√≥gico?", o: ["EtherChannel", "STP", "VTP", "OSPF"], c: 0, e: "EtherChannel agrega ancho de banda y da redundancia." },
            { t: "T4", q: "¬øQu√© factor de forma permite gestionar varios switches como una sola unidad l√≥gica?", o: ["Apilable (Stackable)", "Modular", "Fijo", "Rack"], c: 0, e: "Los switches apilables comparten el plano de control (StackWise)." },
            { t: "T4", q: "¬øQu√© capa es responsable de la seguridad de puerto (Port Security)?", o: ["Acceso", "Distribuci√≥n", "N√∫cleo", "WAN"], c: 0, e: "La seguridad se aplica en el borde, donde se conecta el usuario." },
            { t: "T4", q: "¬øD√≥nde se agrupan los servidores en un dise√±o moderno?", o: ["Granja de Servidores (Data Center)", "Capa de Acceso", "DMZ", "Capa de N√∫cleo directo"], c: 0, e: "Se conectan a switches de alta gama en un bloque de servicios." },
            { t: "T4", q: "¬øQu√© tarea est√° PROHIBIDA en la capa de N√∫cleo?", o: ["Inspecci√≥n de paquetes profunda", "Redundancia", "QoS b√°sico", "Routing r√°pido"], c: 0, e: "Cualquier cosa que use mucha CPU est√° prohibida en el Core." },
            
            // --- TEMA 5: STP (Valores y Algoritmo) ---
            { t: "T5", q: "En STP 802.1D, ¬øcu√°nto dura el temporizador Max Age?", o: ["20 segundos", "15 segundos", "2 segundos", "50 segundos"], c: 0, e: "Max Age = 20s. Forward Delay = 15s. Hello = 2s." },
            { t: "T5", q: "¬øCu√°l es el tiempo TOTAL de convergencia en STP cl√°sico (Listen+Learn+MaxAge)?", o: ["50 segundos", "30 segundos", "20 segundos", "2 segundos"], c: 0, e: "20s (Max Age) + 15s (Listen) + 15s (Learn) = 50s." },
            { t: "T5", q: "¬øQu√© costo tiene un enlace de 10 Gbps seg√∫n IEEE revisado?", o: ["2", "1", "4", "19"], c: 0, e: "10G=2, 1G=4, 100M=19." },
            { t: "T5", q: "¬øQu√© costo tiene un enlace de 100 Mbps seg√∫n IEEE revisado?", o: ["19", "10", "100", "4"], c: 0, e: "100Mbps = 19." },
            { t: "T5", q: "¬øQu√© criterio es el PRIMERO para elegir el Root Bridge?", o: ["Menor BID", "Mayor MAC", "Menor IP", "Mayor prioridad"], c: 0, e: "Gana el switch con el Bridge ID m√°s bajo." },
            { t: "T5", q: "Si dos switches tienen la misma prioridad, ¬øqu√© desempata el Root Bridge?", o: ["La MAC m√°s baja", "La MAC m√°s alta", "El puerto m√°s bajo", "La IP m√°s alta"], c: 0, e: "BID = Prioridad + MAC. Si prioridad igual, gana MAC baja." },
            { t: "T5", q: "¬øQu√© parte del BID cambia por defecto en Cisco (PVST+)?", o: ["Prioridad + ID VLAN", "Solo MAC", "Solo Prioridad", "Nada"], c: 0, e: "La prioridad (2 bytes) incluye el ID de VLAN (Sys ID Ext)." },
            { t: "T5", q: "¬øCu√°ntos Puertos Ra√≠z tiene un switch que NO es Root?", o: ["Uno", "Dos", "Ninguno", "Uno por enlace"], c: 0, e: "Solo un mejor camino hacia el Root." },
            { t: "T5", q: "¬øQu√© estado de puerto STP aprende MACs pero NO env√≠a datos?", o: ["Learning", "Listening", "Blocking", "Forwarding"], c: 0, e: "Learning puebla la tabla MAC antes de abrir." },
            { t: "T5", q: "¬øQu√© hace la funci√≥n PortFast?", o: ["Salta a Forwarding inmediatamente", "Desactiva STP", "Aumenta la velocidad", "Prioriza voz"], c: 0, e: "Evita los 30s de espera. Solo para PC/Tel√©fonos." },
            { t: "T5", q: "¬øQu√© estado NO existe en RSTP (802.1w)?", o: ["Blocking", "Discarding", "Learning", "Forwarding"], c: 0, e: "RSTP usa 'Discarding' en lugar de Blocking/Listening." },

            // --- TEMA 6: VLANs ---
            { t: "T6", q: "¬øCu√°l es el valor hexadecimal del TPID en 802.1Q?", o: ["0x8100", "0x8200", "0x0800", "0xFFFF"], c: 0, e: "0x8100 identifica la trama etiquetada." },
            { t: "T6", q: "¬øCu√°ntos bits tiene el campo VLAN ID (VID)?", o: ["12 bits", "16 bits", "8 bits", "4 bits"], c: 0, e: "12 bits permiten 4096 VLANs." },
            { t: "T6", q: "¬øQu√© pasa con el tr√°fico de la VLAN Nativa en un Trunk?", o: ["No lleva etiqueta", "Se etiqueta con ID 1", "Se bloquea", "Lleva doble etiqueta"], c: 0, e: "Por dise√±o, la nativa es 'untagged'." },
            { t: "T6", q: "¬øQu√© VLAN viene por defecto en todos los puertos Cisco?", o: ["VLAN 1", "VLAN 100", "Ninguna", "VLAN 99"], c: 0, e: "VLAN 1 es la default y lleva tr√°fico de control." },
            { t: "T6", q: "¬øD√≥nde se guardan las VLANs de rango extendido (1006+)?", o: ["running-config", "vlan.dat", "flash", "ROM"], c: 0, e: "Las extendidas no caben en vlan.dat, van en la config." },
            { t: "T6", q: "¬øQu√© IDs de VLAN est√°n reservados para Token Ring/FDDI?", o: ["1002-1005", "1-5", "4000-4005", "100-105"], c: 0, e: "Son legados hist√≥ricos inamovibles." },
            { t: "T6", q: "¬øQu√© caracter√≠stica es cr√≠tica para una VLAN de Voz?", o: ["Retardo < 150ms", "Sin QoS", "Ancho de banda bajo", "Sin etiqueta"], c: 0, e: "La voz necesita prioridad y bajo retardo." },

            // --- TEMA 7: VTP ---
            { t: "T7", q: "¬øQu√© hace un cliente VTP si ve una Revisi√≥n mayor?", o: ["Pide actualizaci√≥n (Request)", "Ignora", "Pasa a Transparente", "Borra su Flash"], c: 0, e: "Sabe que su BD es vieja y pide la nueva." },
            { t: "T7", q: "¬øD√≥nde guarda la config un switch VTP Transparente?", o: ["NVRAM (startup-config)", "vlan.dat", "RAM", "Servidor"], c: 0, e: "Guarda localmente, no en la base de datos compartida." },
            { t: "T7", q: "¬øQu√© peligro tiene conectar un switch con Revisi√≥n Alta?", o: ["Borra todas las VLANs de la red", "Crea un bucle", "Apaga el dominio", "Nada"], c: 0, e: "El servidor actual se sincronizar√° con √©l y perder√° sus datos." },
            { t: "T7", q: "¬øQu√© modo VTP crea VLANs pero NO las comparte?", o: ["Transparente", "Servidor", "Cliente", "Off"], c: 0, e: "Transparente es local. Reenv√≠a anuncios de otros, pero no los suyos." },
            { t: "T7", q: "¬øQu√© mensaje VTP lleva la lista completa de VLANs?", o: ["Subset Advertisement", "Summary Advertisement", "Request", "Hello"], c: 0, e: "El Summary solo lleva la revisi√≥n; el Subset lleva los datos." },
            { t: "T7", q: "¬øQu√© hace VTP Pruning?", o: ["Evita tr√°fico broadcast innecesario", "Borra VLANs viejas", "Corta cables f√≠sicos", "Resetea la revisi√≥n"], c: 0, e: "Poda el tr√°fico hacia switches que no tienen usuarios en esa VLAN." },
            
            // --- TEMA 8: ROUTING ---
            { t: "T8", q: "¬øQu√© comando activa el routing en un Switch L3?", o: ["ip routing", "router ospf", "no switchport", "encapsulation dot1q"], c: 0, e: "Sin 'ip routing', el switch es solo L2." },
            { t: "T8", q: "¬øQu√© requiere una interfaz f√≠sica en Router-on-a-Stick?", o: ["Estar sin IP y encendida", "Tener IP", "Ser trunk L2", "Nada"], c: 0, e: "La IP va en las subinterfaces, no en la f√≠sica." },
            { t: "T8", q: "¬øC√≥mo se llama la interfaz virtual de una VLAN en un switch L3?", o: ["SVI", "VLAN Port", "Subinterfaz", "Tunnel"], c: 0, e: "Switch Virtual Interface (interface vlan X)." },
            { t: "T8", q: "¬øQu√© comando convierte un puerto de switch en puerto de router?", o: ["no switchport", "ip routing", "port-channel", "mode trunk"], c: 0, e: "Desactiva las funciones L2 del puerto." },
            { t: "T8", q: "En ROAS, ¬ød√≥nde se configura la encapsulaci√≥n 802.1Q?", o: ["En la subinterfaz", "En el switch", "En la interfaz f√≠sica", "En el PC"], c: 0, e: "encapsulation dot1q <id> en la subinterfaz." },
            
            // --- VARIACIONES Y EXTRAS ---
            { t: "T5", q: "Si el costo al Root es igual en dos puertos, ¬øqu√© desempata?", o: ["BID del vecino", "Prioridad propia", "MAC propia", "Velocidad"], c: 0, e: "1. Costo, 2. BID Vecino, 3. Prioridad Puerto Vecino, 4. ID Puerto Vecino." },
            { t: "T5", q: "¬øQu√© prioridad STP es la predeterminada?", o: ["32768", "1", "4096", "100"], c: 0, e: "Es el valor base." },
            { t: "T6", q: "¬øCu√°ntos bytes a√±ade la etiqueta 802.1Q a la trama?", o: ["4 Bytes", "2 Bytes", "128 Bytes", "1 Byte"], c: 0, e: "4 Bytes (32 bits)." },
            { t: "T6", q: "¬øQu√© campo de 802.1Q se usa para la prioridad (CoS)?", o: ["TCI (PRI)", "TPID", "VID", "CFI"], c: 0, e: "Los 3 bits de PRI est√°n dentro del TCI." },
            { t: "T7", q: "¬øCada cu√°nto se env√≠a un VTP Summary por defecto?", o: ["5 minutos", "30 segundos", "1 hora", "10 minutos"], c: 0, e: "Cada 5 minutos o cuando hay un cambio." }
        ];

        /* --- MOTOR DEL SIMULADOR --- */
        let currentQuiz = [];
        let currentIndex = 0;
        let score = 0;

        function startQuiz() {
            // 1. Barajar todo el banco
            const shuffled = masterQuestionBank.map(q => ({...q})).sort(() => 0.5 - Math.random());
            
            // 2. Barajar las opciones de cada pregunta
            currentQuiz = shuffled.slice(0, 10).map(q => {
                const correctAnswer = q.o[q.c];
                const options = [...q.o].sort(() => 0.5 - Math.random());
                const newCorrectIndex = options.indexOf(correctAnswer);
                return { ...q, o: options, c: newCorrectIndex };
            });

            currentIndex = 0;
            score = 0;

            // 3. UI Update
            document.getElementById('quiz-start').classList.add('hidden');
            document.getElementById('result-screen').classList.add('hidden');
            document.getElementById('quiz-question').classList.remove('hidden');
            loadQuestion();
        }

        function loadQuestion() {
            const q = currentQuiz[currentIndex];
            
            // Textos
            document.getElementById('q-topic').innerText = q.t;
            document.getElementById('q-counter').innerText = `${currentIndex + 1}/10`;
            document.getElementById('q-text').innerText = q.q;
            
            // Reset UI
            const optsContainer = document.getElementById('q-options');
            optsContainer.innerHTML = '';
            document.getElementById('feedback').classList.add('hidden');
            document.getElementById('btn-next').classList.add('hidden');

            // Generar Opciones
            q.o.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerHTML = opt;
                btn.onclick = () => checkAnswer(idx, btn, q);
                optsContainer.appendChild(btn);
            });
        }

        function checkAnswer(selectedIdx, btn, qData) {
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(b => b.disabled = true);

            const isCorrect = selectedIdx === qData.c;
            const feedbackEl = document.getElementById('feedback');
            const fbIcon = document.getElementById('fb-icon');
            const fbTitle = document.getElementById('fb-title');
            
            if (isCorrect) {
                score++;
                btn.classList.add('correct');
                fbIcon.innerHTML = '<i class="fa-solid fa-circle-check text-green-500"></i>';
                fbTitle.innerText = "¬°CORRECTO!";
                fbTitle.className = "font-black text-xl mb-1 text-green-600";
                feedbackEl.className = "mt-8 p-6 rounded-xl border border-green-200 bg-green-50 block shadow-lg feedback-panel";
            } else {
                btn.classList.add('incorrect');
                buttons[qData.c].classList.add('correct');
                fbIcon.innerHTML = '<i class="fa-solid fa-circle-xmark text-red-500"></i>';
                fbTitle.innerText = "ERROR";
                fbTitle.className = "font-black text-xl mb-1 text-red-600";
                feedbackEl.className = "mt-8 p-6 rounded-xl border border-red-200 bg-red-50 block shadow-lg feedback-panel";
            }

            document.getElementById('fb-text').innerText = qData.e;
            document.getElementById('btn-next').classList.remove('hidden');
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex < currentQuiz.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            document.getElementById('quiz-question').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            
            const scoreDisplay = document.getElementById('score-display');
            scoreDisplay.innerText = `${score}/10`;
            
            let msg = "";
            if(score === 10) msg = "¬°INCRE√çBLE! üèÜ Nivel Experto.";
            else if(score >= 9) msg = "¬°Excelente! Casi perfecto.";
            else if(score >= 7) msg = "Buen trabajo. Repasa los fallos.";
            else msg = "Sigue practicando. La repetici√≥n es clave.";
            
            document.getElementById('score-msg').innerText = msg;
        }
    </script>
</body>
</html>
