<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Biblioteca de Manga</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Iconos SVG
        const Icon = ({ name, className = "w-6 h-6" }) => {
            const icons = {
                search: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>,
                plus: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" /></svg>,
                trash: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>,
                edit: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>,
                save: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" /></svg>,
                x: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" /></svg>,
                upload: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" /></svg>,
                download: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>,
                filter: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" /></svg>,
                book: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg>,
                check: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
            };
            return icons[name] || null;
        };

        const MangaLibraryManager = () => {
            const [mangas, setMangas] = useState([]);
            const [filteredMangas, setFilteredMangas] = useState([]);
            const [searchTerm, setSearchTerm] = useState('');
            const [filterDemografia, setFilterDemografia] = useState('');
            const [filterMihon, setFilterMihon] = useState('all');
            const [showAddModal, setShowAddModal] = useState(false);
            const [showEditModal, setShowEditModal] = useState(false);
            const [editingManga, setEditingManga] = useState(null);
            const [newMangaUrl, setNewMangaUrl] = useState('');
            const [newMangaChapter, setNewMangaChapter] = useState('');
            const [loading, setLoading] = useState(false);
            const fileInputRef = useRef(null);

            // Storage simulado con localStorage
            const storage = {
                get: (key) => {
                    try {
                        const item = localStorage.getItem(key);
                        return item ? { value: item } : null;
                    } catch (e) {
                        return null;
                    }
                },
                set: (key, value) => {
                    try {
                        localStorage.setItem(key, value);
                        return { key, value };
                    } catch (e) {
                        return null;
                    }
                }
            };

            useEffect(() => {
                loadFromStorage();
            }, []);

            useEffect(() => {
                let filtered = [...mangas];

                if (searchTerm) {
                    filtered = filtered.filter(manga =>
                        manga.titulo.toLowerCase().includes(searchTerm.toLowerCase())
                    );
                }

                if (filterDemografia) {
                    filtered = filtered.filter(manga =>
                        manga.demografia === filterDemografia
                    );
                }

                if (filterMihon !== 'all') {
                    filtered = filtered.filter(manga =>
                        filterMihon === 'yes' ? manga.en_mihon : !manga.en_mihon
                    );
                }

                setFilteredMangas(filtered);
            }, [mangas, searchTerm, filterDemografia, filterMihon]);

            const loadFromStorage = () => {
                try {
                    const result = storage.get('manga-library');
                    if (result && result.value) {
                        const data = JSON.parse(result.value);
                        setMangas(data);
                        console.log('Datos cargados:', data.length, 'mangas');
                    }
                } catch (error) {
                    console.log('No hay datos previos:', error);
                }
            };

            const saveToStorage = (data) => {
                try {
                    storage.set('manga-library', JSON.stringify(data));
                    console.log('Datos guardados:', data.length, 'mangas');
                } catch (error) {
                    console.error('Error al guardar:', error);
                    alert('Error al guardar los datos');
                }
            };

            const extractMangaInfo = (url) => {
                const match = url.match(/\/manga\/(\d+)\//);
                const mangaId = match ? match[1] : Date.now().toString();
                
                const titleMatch = url.match(/\/manga\/\d+\/([^\/\?]+)/);
                let titulo = titleMatch ? titleMatch[1].replace(/([A-Z])/g, ' $1').trim() : 'Manga sin t√≠tulo';
                titulo = titulo.charAt(0).toUpperCase() + titulo.slice(1);

                return {
                    url: url.trim(),
                    manga_id: mangaId,
                    tipo: 'MANGA',
                    cover_image: `https://via.placeholder.com/300x400/6366f1/ffffff?text=${encodeURIComponent(titulo)}`,
                    titulo: titulo,
                    titulo_display: titulo,
                    puntuacion: 0,
                    demografia: '',
                    capitulo_actual: 0,
                    capitulo_total: 0,
                    capitulos_pendientes: 0,
                    progreso_porcentaje: 0,
                    completado: false,
                    en_mihon: false
                };
            };

            const handleAddManga = () => {
                if (!newMangaUrl.trim()) {
                    alert('Por favor, ingresa una URL v√°lida');
                    return;
                }

                setLoading(true);
                const mangaInfo = extractMangaInfo(newMangaUrl);
                mangaInfo.capitulo_actual = parseInt(newMangaChapter) || 0;

                const updatedMangas = [...mangas, mangaInfo];
                setMangas(updatedMangas);
                saveToStorage(updatedMangas);

                setShowAddModal(false);
                setNewMangaUrl('');
                setNewMangaChapter('');
                setLoading(false);
            };

            const handleDeleteManga = (manga) => {
                if (window.confirm(`¬øEst√°s seguro de eliminar "${manga.titulo}"?`)) {
                    const updatedMangas = mangas.filter(m => !(m.manga_id === manga.manga_id && m.url === manga.url));
                    setMangas(updatedMangas);
                    saveToStorage(updatedMangas);
                }
            };

            const handleEditManga = (manga) => {
                setEditingManga({ ...manga });
                setShowEditModal(true);
            };

            const handleSaveEdit = () => {
                const updatedMangas = mangas.map(m =>
                    (m.manga_id === editingManga.manga_id && m.url === editingManga.url) ? editingManga : m
                );
                setMangas(updatedMangas);
                saveToStorage(updatedMangas);
                setShowEditModal(false);
                setEditingManga(null);
            };

            const handleImportJSON = (e) => {
                const file = e.target.files[0];
                if (!file) {
                    console.log('No se seleccion√≥ archivo');
                    return;
                }

                console.log('Archivo seleccionado:', file.name);
                setLoading(true);

                const reader = new FileReader();
                
                reader.onload = (event) => {
                    try {
                        const json = JSON.parse(event.target.result);
                        console.log('JSON parseado:', json);
                        
                        let importedMangas = json.biblioteca || json;
                        
                        if (!Array.isArray(importedMangas)) {
                            throw new Error('El formato del archivo no es v√°lido');
                        }
                        
                        const processedMangas = importedMangas.map(manga => ({
                            ...manga,
                            en_mihon: manga.en_mihon !== undefined ? manga.en_mihon : false,
                            capitulo_actual: isNaN(manga.capitulo_actual) ? 0 : manga.capitulo_actual,
                            capitulo_total: isNaN(manga.capitulo_total) ? 0 : manga.capitulo_total,
                            completado: manga.completado || false,
                            puntuacion: isNaN(manga.puntuacion) ? 0 : manga.puntuacion
                        }));

                        setMangas(processedMangas);
                        saveToStorage(processedMangas);
                        alert(`‚úÖ ${processedMangas.length} mangas importados correctamente`);
                        console.log('Importaci√≥n completada');
                    } catch (error) {
                        alert('‚ùå Error al importar el archivo JSON: ' + error.message);
                        console.error('Error de importaci√≥n:', error);
                    } finally {
                        setLoading(false);
                        if (fileInputRef.current) {
                            fileInputRef.current.value = '';
                        }
                    }
                };

                reader.onerror = () => {
                    alert('‚ùå Error al leer el archivo');
                    setLoading(false);
                };

                reader.readAsText(file);
            };

            const handleExportJSON = () => {
                const exportData = {
                    metadata: {
                        fecha_exportacion: new Date().toISOString(),
                        total_mangas: mangas.length,
                        version: '2.0'
                    },
                    biblioteca: mangas
                };

                const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `biblioteca_manga_${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);
            };

            const demografias = [...new Set(mangas.map(m => m.demografia).filter(Boolean))];

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4 md:p-6">
                    <div className="max-w-7xl mx-auto">
                        <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-4 md:p-6 mb-6 shadow-2xl border border-white/20">
                            <h1 className="text-3xl md:text-4xl font-bold text-white mb-2 flex items-center gap-3">
                                <Icon name="book" className="w-8 h-8 md:w-10 md:h-10" />
                                Mi Biblioteca de Manga
                            </h1>
                            <p className="text-purple-200 text-lg">{mangas.length} mangas en total ‚Ä¢ {filteredMangas.length} mostrados</p>
                        </div>

                        <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-4 md:p-6 mb-6 shadow-2xl border border-white/20">
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4 mb-4">
                                <div className="relative">
                                    <div className="absolute left-3 top-3 text-purple-300">
                                        <Icon name="search" className="w-5 h-5" />
                                    </div>
                                    <input
                                        type="text"
                                        placeholder="Buscar manga..."
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                        className="w-full pl-10 pr-4 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400"
                                    />
                                </div>

                                <div className="relative">
                                    <div className="absolute left-3 top-3 text-purple-300 pointer-events-none">
                                        <Icon name="filter" className="w-5 h-5" />
                                    </div>
                                    <select
                                        value={filterDemografia}
                                        onChange={(e) => setFilterDemografia(e.target.value)}
                                        className="w-full pl-10 pr-4 py-2 bg-white/20 border border-white/30 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-400"
                                    >
                                        <option value="">Todas las demograf√≠as</option>
                                        {demografias.map(d => <option key={d} value={d}>{d}</option>)}
                                    </select>
                                </div>

                                <div className="relative">
                                    <select
                                        value={filterMihon}
                                        onChange={(e) => setFilterMihon(e.target.value)}
                                        className="w-full px-4 py-2 bg-white/20 border border-white/30 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-400"
                                    >
                                        <option value="all">Todos (Mihon)</option>
                                        <option value="yes">En Mihon</option>
                                        <option value="no">No en Mihon</option>
                                    </select>
                                </div>
                            </div>

                            <div className="flex flex-wrap gap-3">
                                <button
                                    onClick={() => setShowAddModal(true)}
                                    className="flex items-center gap-2 px-4 md:px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg text-sm md:text-base"
                                >
                                    <Icon name="plus" className="w-5 h-5" />
                                    A√±adir Manga
                                </button>

                                <label className="flex items-center gap-2 px-4 md:px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-600 text-white rounded-lg hover:from-blue-600 hover:to-cyan-700 transition-all shadow-lg cursor-pointer text-sm md:text-base">
                                    <Icon name="upload" className="w-5 h-5" />
                                    {loading ? 'Importando...' : 'Importar JSON'}
                                    <input 
                                        ref={fileInputRef}
                                        type="file" 
                                        accept=".json" 
                                        onChange={handleImportJSON} 
                                        className="hidden"
                                        disabled={loading}
                                    />
                                </label>

                                <button
                                    onClick={handleExportJSON}
                                    disabled={mangas.length === 0}
                                    className="flex items-center gap-2 px-4 md:px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-600 text-white rounded-lg hover:from-purple-600 hover:to-pink-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed text-sm md:text-base"
                                >
                                    <Icon name="download" className="w-5 h-5" />
                                    Exportar JSON
                                </button>
                            </div>
                        </div>

                        <div className="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 md:gap-6">
                            {filteredMangas.map((manga, index) => (
                                <div
                                    key={`${manga.manga_id}-${manga.url}-${index}`}
                                    className="bg-white/10 backdrop-blur-lg rounded-xl overflow-hidden shadow-2xl border border-white/20 hover:scale-105 transition-transform duration-300"
                                >
                                    <div className="relative">
                                        <img
                                            src={manga.cover_image}
                                            alt={manga.titulo}
                                            className="w-full h-48 md:h-64 object-cover"
                                            onError={(e) => {
                                                e.target.src = `https://via.placeholder.com/300x400/6366f1/ffffff?text=${encodeURIComponent(manga.titulo.substring(0, 20))}`;
                                            }}
                                        />
                                        {manga.en_mihon && (
                                            <div className="absolute top-2 right-2 bg-green-500 text-white px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1">
                                                <Icon name="check" className="w-3 h-3" />
                                                Mihon
                                            </div>
                                        )}
                                    </div>

                                    <div className="p-3 md:p-4">
                                        <h3 className="text-white font-bold text-sm md:text-base mb-2 line-clamp-2" title={manga.titulo_display}>
                                            {manga.titulo_display}
                                        </h3>
                                        
                                        <div className="space-y-1 text-xs md:text-sm text-purple-200">
                                            {manga.puntuacion > 0 && (
                                                <p>‚≠ê {manga.puntuacion}/10</p>
                                            )}
                                            {manga.demografia && (
                                                <p>üìö {manga.demografia}</p>
                                            )}
                                            <p>üìñ Cap. {manga.capitulo_actual || 0}{manga.capitulo_total ? `/${manga.capitulo_total}` : ''}</p>
                                        </div>

                                        <div className="flex gap-2 mt-3 md:mt-4">
                                            <button
                                                onClick={() => handleEditManga(manga)}
                                                className="flex-1 flex items-center justify-center gap-1 px-2 md:px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-xs md:text-sm"
                                            >
                                                <Icon name="edit" className="w-3 h-3 md:w-4 md:h-4" />
                                                Editar
                                            </button>
                                            <button
                                                onClick={() => handleDeleteManga(manga)}
                                                className="flex items-center justify-center px-2 md:px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors"
                                            >
                                                <Icon name="trash" className="w-3 h-3 md:w-4 md:h-4" />
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>

                        {filteredMangas.length === 0 && mangas.length === 0 && (
                            <div className="text-center py-20 bg-white/10 backdrop-blur-lg rounded-2xl border border-white/20">
                                <Icon name="book" className="w-16 h-16 text-purple-300 mx-auto mb-4" />
                                <p className="text-white text-xl mb-2">Tu biblioteca est√° vac√≠a</p>
                                <p className="text-purple-200">Importa tu archivo JSON o a√±ade mangas manualmente</p>
                            </div>
                        )}

                        {filteredMangas.length === 0 && mangas.length > 0 && (
                            <div className="text-center py-20 bg-white/10 backdrop-blur-lg rounded-2xl border border-white/20">
                                <Icon name="search" className="w-16 h-16 text-purple-300 mx-auto mb-4" />
                                <p className="text-white text-xl">No se encontraron mangas con esos filtros</p>
                            </div>
                        )}

                        {showAddModal && (
                            <div className="fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50">
                                <div className="bg-gradient-to-br from-purple-800 to-blue-900 rounded-2xl p-6 max-w-md w-full shadow-2xl border border-white/20">
                                    <div className="flex justify-between items-center mb-4">
                                        <h2 className="text-2xl font-bold text-white">A√±adir Manga</h2>
                                        <button onClick={() => setShowAddModal(false)} className="text-white hover:text-red-400">
                                            <Icon name="x" className="w-6 h-6" />
                                        </button>
                                    </div>

                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-purple-200 mb-2">URL del Manga</label>
                                            <input
                                                type="text"
                                                value={newMangaUrl}
                                                onChange={(e) => setNewMangaUrl(e.target.value)}
                                                placeholder="https://zonatmo.com/library/manga/..."
                                                className="w-full px-4 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400"
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-purple-200 mb-2">Cap√≠tulo Actual</label>
                                            <input
                                                type="number"
                                                value={newMangaChapter}
                                                onChange={(e) => setNewMangaChapter(e.target.value)}
                                                placeholder="0"
                                                className="w-full px-4 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-400"
                                            />
                                        </div>

                                        <button
                                            onClick={handleAddManga}
                                            disabled={loading}
                                            className="w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all disabled:opacity-50"
                                        >
                                            {loading ? 'A√±adiendo...' : (
                                                <>
                                                    <Icon name="plus" className="w-5 h-5" />
                                                    A√±adir
                                                </>
                                            )}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {showEditModal && editingManga && (
                            <div className="fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50 overflow-y-auto">
                                <div className="bg-gradient-to-br from-purple-800 to-blue-900 rounded-2xl p-6 max-w-md w-full shadow-2xl border border-white/20 my-8">
                                    <div className="flex justify-between items-center mb-4">
                                        <h2 className="text-2xl font-bold text-white">Editar Manga</h2>
                                        <button onClick={() => setShowEditModal(false)} className="text-white hover:text-red-400">
                                            <Icon name="x" className="w-6 h-6" />
                                        </button>
                                    </div>

                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-purple-200 mb-2">T√≠tulo</label>
                                            <input
                                                type="text"
                                                value={editingManga.titulo_display}
                                                onChange={(e) => setEditingManga({ ...editingManga, titulo_display: e.target.value })}
                                                className="w-full px-4 py-2 bg-white/20 border border-white/30 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-400"
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-purple-200 mb-2">Cap√≠tulo Actual</label>
                                            <input
                                                type="number"
                                                value={editingManga.capitulo_actual || 0}
                                                onChange={(e) => setEditingManga({ ...editingManga, capitulo_actual: parseInt(e.target.value) || 0 })}
                                                className="w-full px-4 py-2 bg-white/20 border border-white/30 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-400"
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-purple-200 mb-2">Cap√≠tulos Totales</label>
                                            <input
                                                type="number"
                                                value={editingManga.capitulo_total || 0}
                                                onChange={(e) => setEditingManga({ ...editingManga, capitulo_total: parseInt(e.target.value) || 0 })}
                                                className="w-full px-4 py-2 bg-white/20 border border-white/30 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-400"
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-purple-200 mb-2">Puntuaci√≥n (0-10)</label>
                                            <input
                                                type="number"
                                                step="0.1"
                                                min="0"
                                                max="10"
                                                value={editingManga.puntuacion || 0}
                                                onChange={(e) => setEditingManga({ ...editingManga, puntuacion: parseFloat(e.target.value) || 0 })}
                                                className="w-full px-4 py-2 bg-white/20 border border-white/30 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-400"
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-purple-200 mb-2">Demograf√≠a</label>
                                            <select
                                                value={editingManga.demografia || ''}
                                                onChange={(e) => setEditingManga({ ...editingManga, demografia: e.target.value })}
                                                className="w-full px-4 py-2 bg-white/20 border border-white/30 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-400"
                                            >
                                                <option value="">Seleccionar</option>
                                                <option value="Shounen">Shounen</option>
                                                <option value="Shoujo">Shoujo</option>
                                                <option value="Seinen">Seinen</option>
                                                <option value="Josei">Josei</option>
                                                <option value="Kodomo">Kodomo</option>
                                            </select>
                                        </div>

                                        <div>
                                            <label className="block text-purple-200 mb-2">URL de la Portada</label>
                                            <input
                                                type="text"
                                                value={editingManga.cover_image}
                                                onChange={(e) => setEditingManga({ ...editingManga, cover_image: e.target.value })}
                                                className="w-full px-4 py-2 bg-white/20 border border-white/30 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-400"
                                            />
                                        </div>

                                        <div className="flex items-center gap-3">
                                            <input
                                                type="checkbox"
                                                id="en_mihon"
                                                checked={editingManga.en_mihon || false}
                                                onChange={(e) => setEditingManga({ ...editingManga, en_mihon: e.target.checked })}
                                                className="w-5 h-5 rounded"
                                            />
                                            <label htmlFor="en_mihon" className="text-purple-200">
                                                Est√° en mi biblioteca de Mihon
                                            </label>
                                        </div>

                                        <div className="flex items-center gap-3">
                                            <input
                                                type="checkbox"
                                                id="completado"
                                                checked={editingManga.completado || false}
                                                onChange={(e) => setEditingManga({ ...editingManga, completado: e.target.checked })}
                                                className="w-5 h-5 rounded"
                                            />
                                            <label htmlFor="completado" className="text-purple-200">
                                                Manga completado
                                            </label>
                                        </div>

                                        <button
                                            onClick={handleSaveEdit}
                                            className="w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-600 text-white rounded-lg hover:from-blue-600 hover:to-cyan-700 transition-all"
                                        >
                                            <Icon name="save" className="w-5 h-5" />
                                            Guardar Cambios
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<MangaLibraryManager />, document.getElementById('root'));
    </script>
</body>
</html>
